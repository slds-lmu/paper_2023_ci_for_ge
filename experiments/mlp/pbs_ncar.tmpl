#!/bin/bash

#PBS -N <%= job.name %>
#PBS -A WYOM0202
#PBS -j oe
#PBS -k eod
#PBS -q main
#PBS -l job_priority=economy
#PBS -l select=1:ncpus=128
#PBS -l walltime=24:00:00
#PBS -o <%= log.file %>

### Set temp to scratch
export TMPDIR=/glade/derecho/scratch/${USER}/tmp && mkdir -p ${TMPDIR}

### specify desired module environment
ml conda
conda activate inference

### Run
Rscript -e 'batchtools::doJobCollection("<%= uri_1 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_2 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_3 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_4 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_5 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_6 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_7 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_8 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_9 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_10 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_11 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_12 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_13 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_14 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_15 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_16 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_17 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_18 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_19 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_20 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_21 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_22 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_23 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_24 %>")' &
Rscript -e 'batchtools::doJobCollection("<%= uri_25 %>")' &

wait
